!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=SharpenWasm},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n);const i=2,s=4,l=8,c=2,a=4,h=8,u=16,f=2,d=4,p=8,m=16,b=32,y=2,T=4,M=8;new class{constructor(e,t){o()(e).then(e=>{this.core=e,t&&t(this)}),this.version="0.0.1",this.hashCounter=0,this.DOMRefsTable={},this.enableDeepClone=!1,this.core=!1}hash(){return this.hashCounter++}toJsonVDOM(e,t,r=0,n={},o=0){if(this.hashBlock=t,0===o&&(this.hashCounter=1),e instanceof HTMLElement)if(n.tagName=e.tagName,n.hash=`${t}_${r}`,n.attributes={},Array.prototype.slice.call(e.attributes).forEach(e=>{n.attributes[e.nodeName]=e.nodeValue}),this.DOMRefsTable[n.hash]=e,e.children.length>0){n.children=n.children?n.children:{};for(let r of e.children){let e=this.hash(),i=`${t}_${e}`;n.children[i]={},this.toJsonVDOM(r,t,e,n.children[i],++o)}n.type=y}else e.innerText?(n.innerText=e.innerText,n.type=T):n.type=M;return JSON.stringify(n)}mallocStr(e){let t=this.core.lengthBytesUTF8(e)+1,r=this.core._malloc(t);return this.core.stringToUTF8(e,r,t),r}setupHTMLElement(e,t=!1){let r=this.DOMRefsTable[e[m]];if(r&&this.enableDeepClone)return r.cloneNode(!0);r=document.createElement(e.tagName);for(let t in e.attributes)r.setAttribute(t,e.attributes[t]);if(e.children)for(let t in e.children)this.setupHTMLElement(t,r);return e.type==T&&r.appendChild(document.createTextNode(e.innerText)),t&&t.appendChild(r),r}reflect(e){e.forEach(e=>{let t=this.DOMRefsTable[e[m]];e[d]===a&&(e[f]===i||e[f]===s?t.setAttribute(e[p],e[b]):e[f]===l&&t.removeAttribute(e[b])),e[d]===c&&(e[f]===i?t.parentNode.replaceChild(this.setupHTMLElement(e[b]),t):e[f]===s?t.appendChild(this.setupHTMLElement(e[b])):e[f]===l&&t.remove()),e[d]===h&&(e[f]===i||e[f]===s?t.innerText=e[b]:e[f]===l&&(t.innerText="")),e[d]===u&&(e[f]===i||e[f]===s?t.style.setProperty(e[p],e[b]):e[f]===l&&t.style.removeProperty(e[b]))})}patch(e,t){if(!e||!t)return void console.error("[Sharpen] invalid DOM reference!");const r=performance.now(),n=this.toJsonVDOM(e,"o"),o=this.toJsonVDOM(t,"t");if(n!==o){let e=this.mallocStr(n),t=this.mallocStr(o),i=this.core._patch(e,"o".charCodeAt(),t,"t".charCodeAt());this.core._free(e),this.core._free(t);let s=JSON.parse(this.core.Pointer_stringify(i));this.reflect(s),console.info(`[Sharpen] render time used: ${(performance.now()-r).toFixed(3)}ms`)}}}({locateFile:function(e){return"/dist/"+e}},function(e){document.getElementById("btn").addEventListener("click",function(){e.patch(document.getElementById("native"),document.getElementById("patch")),window.Sharpen=e})})}]);