!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=SharpenWasm},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);const i=2,s=4,l=8,c=16,a=32,u=64,h=2,f=4,d=8,p=2,m=4,b=8,y=2,T=4,M=8,O=16,v=2,g=4,S=8,_=16,x=32;new class{constructor(e,t){o()(e).then(e=>{this.core=e,t&&t(this)}),this.version="0.0.1",this.hashCounter=0,this.DOMRefsTable={},this.enableDeepClone=!0,this.core=!1}hash(){return this.hashCounter++}toJsonVDOM(e,t,n=0,r={},o=0){if(this.hashBlock=t,0===o&&(this.hashCounter=1),e instanceof HTMLElement)if(r[c]=e.tagName,r[l]=`${t}_${n}`,r[i]={},Array.prototype.slice.call(e.attributes).forEach(e=>{r[i][e.nodeName]=e.nodeValue}),this.DOMRefsTable[r[l]]=e,e.children.length>0){r[s]=r[s]?r[s]:{};for(let n of e.children){let e=this.hash(),i=`${t}_${e}`;r[s][i]={},this.toJsonVDOM(n,t,e,r[s][i],++o)}r[a]=h}else e.innerText?(r[u]=e.innerText,r[a]=f):r[a]=d;return JSON.stringify(r)}mallocStr(e){let t=this.core.lengthBytesUTF8(e)+1,n=this.core._malloc(t);return this.core.stringToUTF8(e,n,t),n}setupHTMLElement(e,t=!1){let n=this.DOMRefsTable[e[l]];if(n&&this.enableDeepClone)return n.cloneNode(!0);n=document.createElement(e[c]);for(let t in e[i])n.setAttribute(t,e[i][t]);if(e[s])for(let t in e[s])this.setupHTMLElement(t,n);return e[a]==f&&n.appendChild(document.createTextNode(e[u])),t&&t.appendChild(n),n}reflect(e){e.forEach(e=>{let t=this.DOMRefsTable[e[_]];e[g]===T&&(e[v]===p||e[v]===m?t.setAttribute(e[S],e[x]):e[v]===b&&t.removeAttribute(e[x])),e[g]===y&&(e[v]===p?t.parentNode.replaceChild(this.setupHTMLElement(e[x]),t):e[v]===m?t.appendChild(this.setupHTMLElement(e[x])):e[v]===b&&t.remove()),e[g]===M&&(e[v]===p||e[v]===m?t.innerText=e[x]:e[v]===b&&(t.innerText="")),e[g]===O&&(e[v]===p||e[v]===m?t.style.setProperty(e[S],e[x]):e[v]===b&&t.style.removeProperty(e[x]))})}patch(e,t){if(!e||!t)return void console.error("[Sharpen] invalid DOM reference!");const n=performance.now(),r=this.toJsonVDOM(e,"o"),o=this.toJsonVDOM(t,"t");if(r!==o){let e=this.mallocStr(r),t=this.mallocStr(o),i=this.core._patch(e,111,t,116),s=JSON.parse(this.core.Pointer_stringify(i));this.reflect(s),console.info(`[Sharpen] render time used: ${(performance.now()-n).toFixed(3)}ms`),this.core._free(e),this.core._free(t)}}}({locateFile:function(e){return"/dist/"+e}},function(e){document.getElementById("btn").addEventListener("click",function(){e.patch(document.getElementById("native"),document.getElementById("patch")),window.Sharpen=e})})}]);